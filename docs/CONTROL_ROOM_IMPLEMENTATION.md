# تنفيذ واجهة غرفة الكونترول (DASM Platform)

## نظرة عامة

قمنا بتطوير واجهة غرفة الكونترول لمنصة DASM لتمكين المُحرّج (المنادي) من إدارة المزادات المباشرة. توفر هذه الواجهة أدوات لعرض المزايدات الواردة من الإنترنت، التحكم في سير المزاد، عرض السيارات القادمة، وتحويل الصوت إلى نص لعرضه على شاشة المزاد.

## المكونات الرئيسية

### 1. صفحة المُحرّج (`frontend/app/dashboard/auctioneer/page.tsx`)
- الصفحة الرئيسية لواجهة المُحرّج في غرفة الكونترول
- تتكامل مع WebSocket للتحديثات في الوقت الحقيقي
- تعرض جميع مكونات التحكم وتوفر واجهة موحدة للمُحرّج

### 2. مكون المزايدات المباشرة (`frontend/app/dashboard/auctioneer/components/OnlineBids.tsx`)
- يعرض المزايدات الواردة من المزايدين عبر الإنترنت
- يميز المزايدات المباشرة بألوان مختلفة حسب مصدرها (إنترنت أو حضوري)
- يوفر تنبيهات صوتية عند وصول مزايدة جديدة

### 3. مكون أزرار التحكم في المزاد (`frontend/app/dashboard/auctioneer/components/AuctionControls.tsx`)
- يوفر أزرار للتحكم في سير المزاد (إيقاف/تشغيل، الانتقال للسيارة التالية)
- إنهاء المزاد الحالي مع تحديد حالة البيع (تم البيع/لم يتم البيع)
- يعرض الحالة الحالية للمزاد (نشط، متوقف مؤقتاً، في الانتظار)

### 4. مكون السيارات القادمة (`frontend/app/dashboard/auctioneer/components/UpcomingCars.tsx`)
- يعرض قائمة السيارات القادمة في المزاد
- يعرض صور مصغرة والمعلومات الأساسية لكل سيارة
- يوضح الوقت التقريبي المتبقي لكل سيارة

### 5. مكون الإحصائيات المباشرة (`frontend/app/dashboard/auctioneer/components/LiveStats.tsx`)
- يعرض إحصائيات المزاد في الوقت الحقيقي
- يوضح عدد المشاهدين والمزايدين
- يعرض قيمة أعلى مزايدة وإجمالي عدد المزايدات

### 6. مكون تحويل الصوت إلى نص (`frontend/app/dashboard/auctioneer/components/SpeechToText.tsx`)
- يستخدم Web Speech API لتحويل صوت المُحرّج إلى نص
- يوفر واجهة لبدء وإيقاف التسجيل
- يعرض النص المحول لعرضه على شاشة المزاد

### 7. مكون عرض السيارة الحالية (`frontend/app/dashboard/auctioneer/components/CurrentCar.tsx`)
- يعرض تفاصيل السيارة الحالية في المزاد
- يعرض الصور والمواصفات والأسعار
- يتضمن معلومات البائع

## تكامل WebSocket

يتم استخدام `WebSocketProvider` لإدارة الاتصال المباشر مع الخادم والحفاظ على تحديث البيانات في الوقت الحقيقي:

1. **الاستقبال**:
   - استقبال المزايدات الجديدة
   - استقبال تحديثات حالة المزاد
   - استقبال معلومات السيارات القادمة والحالية
   - استقبال الإحصائيات المحدثة

2. **الإرسال**:
   - إرسال أوامر بدء وإيقاف المزاد
   - إرسال أمر الانتقال للسيارة التالية
   - إرسال أمر إنهاء المزاد وتحديد حالة البيع
   - إرسال تحويلات الصوت إلى نص للعرض

## كيفية استخدام غرفة الكونترول

### الوصول للواجهة
يمكن للمُحرّج الوصول إلى الواجهة عبر الرابط `/dashboard/auctioneer`. يتطلب الوصول صلاحيات مُحرّج أو مدير.

### بدء مزاد جديد
1. تحقق من قائمة السيارات المتوفرة في الجانب الأيسر
2. انقر على زر "السيارة التالية" لبدء المزاد على أول سيارة

### إدارة المزاد الحالي
1. استخدم زر "إيقاف مؤقت"/"استئناف" للتحكم في سير المزاد
2. تابع المزايدات الواردة في قائمة المزايدات المباشرة
3. تحدث في الميكروفون لتحويل صوتك إلى نص يظهر على شاشات العرض

### إنهاء المزاد والانتقال للسيارة التالية
1. انقر على "تم البيع" أو "لم يتم البيع" حسب نتيجة المزاد
2. قم بتأكيد الإجراء عند ظهور نافذة التأكيد
3. انقر على "السيارة التالية" للانتقال إلى السيارة التالية في القائمة

## صور توضيحية

![واجهة المُحرّج](../screenshots/auctioneer-dashboard.png)
*واجهة المُحرّج الرئيسية في غرفة الكونترول*

![المزايدات المباشرة](../screenshots/online-bids.png)
*عرض المزايدات المباشرة*

![أزرار التحكم في المزاد](../screenshots/auction-controls.png)
*أزرار التحكم في المزاد*

## الخطوات المستقبلية

1. **تحسين نظام التنبيهات**: إضافة تنبيهات صوتية ومرئية أكثر تمييزاً للمزايدات المهمة
2. **إضافة لوحة تحكم للمشرف**: لمراقبة عدة مزادات متزامنة
3. **نظام أمان إضافي**: للتحقق من صحة المزايدات ومنع التلاعب
4. **تحسين تجربة تحويل الصوت إلى نص**: دعم أفضل للهجات العربية المختلفة
5. **إضافة خيارات البث المباشر**: التحكم في بث المزاد مباشرة من واجهة الكونترول

## ملاحظات فنية

- تم استخدام React Hooks لإدارة حالة المكونات
- تم استخدام سياق React (WebSocketProvider) لمشاركة البيانات والوظائف بين المكونات
- تم دعم اللغة العربية بالكامل في واجهة المستخدم ونظام تحويل الصوت إلى نص
- تم تصميم الواجهة ليتم استخدامها على شاشات كبيرة في غرف الكونترول 