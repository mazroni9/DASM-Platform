# تفسير نتائج الاختبارات والسجل للأعمال (Business)

قسم قصير يوضح **كيف نقرأ نتائج السيناريوهات ونتائج سجل النشاط** وكيف نترجمها إلى **قرارات عملية** (تشغيل، جودة، مراقبة، تحسين).

---

## 1. من أين نقرأ النتائج؟

| المصدر | أين يُعرض | ماذا يعكس |
|--------|-----------|-----------|
| **تشغيلات السيناريوهات** (Runs) | لوحة تحليلات اختبارات المزادات `/admin/auction-testing-analytics`، وصفحة اختبارات المزادات (قسم السيناريوهات) | سلوك المنصة تحت حمل محاكى: عدد المزايدات، زمن الاستجابة، نجاح/فشل التشغيل. |
| **اختبارات المنطق** (Logic, Transitions, Price, State) | نفس اللوحة التحليلية + صفحة اختبارات المزادات (جدول النتائج، مصفوفة Test Cases) | صحة قواعد المزاد: الحالات، الانتقالات، السعر، استقرار البيانات. |
| **سجل النشاط الفوري** (Activity Log) | صفحة سجل المزادات الفوري + لوحة التحليلات (عدد الأحداث حسب النوع) | ما يحدث فعليًا في المزادات: مزايدة مقبولة/مرفوضة، بدء، انتهاء، فشل. |

---

## 2. كيف نفسّر المؤشرات؟

### نسبة نجاح السيناريوهات (Scenario success rate)

- **ما هو:** نسبة تشغيلات السيناريوهات التي انتهت بحالة `completed` أو `passed` من إجمالي التشغيلات.
- **قرار:** إذا انخفضت النسبة عن حد مقبول (مثلاً &lt; 90٪) راجع أسباب الفشل (رسالة الخطأ في تفاصيل التشغيل). قد تدل على ضغط على الخادم، أو قواعد مزاد تحتاج ضبط.

### متوسط زمن الاستجابة (Latency)

- **ما هو:** متوسط زمن معالجة المزايدة (بالميلي ثانية) خلال تشغيلات السيناريوهات.
- **قرار:** ارتفاع مفاجئ أو مستمر قد يعني تحميل زائد أو حاجة لتحسين استعلامات أو Queue. حدّد هدفًا (مثلاً &lt; 500 ms) وراقب الانحراف.

### متوسط مزايدات/دقيقة (Bids per minute)

- **ما هو:** متوسط عدد المزايدات المُعالجة في الدقيقة خلال السيناريوهات.
- **قرار:** يساعد في تقدير قدرة المنصة على استيعاب الذروات. استخدمه مع سيناريوهات "ضغط عالي" أو "سنايبر" لمعرفة هل المنصة تتحمل ذروة نهاية المزاد.

### نسبة نجاح اختبارات المنطق (Test suite success rate)

- **ما هو:** نسبة تشغيلات اختبارات المنطق (logic، transitions، price_updates، state_consistency) التي انتهت بحالة `passed`.
- **قرار:** إذا انخفضت أو ظهر فشل متكرر في فئة معيّنة (مثلاً Transitions) فهذا يشير إلى احتمال خطأ في المنطق أو في البيئة (توقيت، بيانات). يجب معالجة السبب قبل الاعتماد على المنصة في الإنتاج.

### أحداث سجل النشاط (Activity log events)

- **ما هو:** عدد الأحداث المسجّلة (مزايدة مقبولة، مرفوضة، بدء مزاد، انتهاء، فشل) في الفترة المختارة.
- **قرار:**  
  - ارتفاع نسبة `bid_rejected` مقابل `bid_placed` قد يدل على قواعد صارمة أو مشكلة في واجهة المستخدم (عروض خاطئة).  
  - تتابع الأحداث (بدء → مزايدات → انتهاء) يساعد في المراجعة والتدقيق عند شكوى (مثلاً "لم تُقبل مزايدتي") عبر تتبع الوقت ونوع الحدث.

---

## 3. تحويل النتائج إلى قرارات (أمثلة)

| الوضع | قرار مقترح |
|--------|-------------|
| انخفاض نسبة نجاح السيناريوهات في سيناريو "ضغط عالي" | مراجعة أداء الخادم والـ Queue؛ زيادة الموارد أو تحسين الكود. |
| فشل متكرر في اختبار "الانتقال بين الأنواع" | مراجعة منطق التوقيت ونوع المزاد (LIVE، SILENT_INSTANT، إلخ) والبيئة (السيرفر، الوقت). |
| ارتفاع ملحوظ في `bid_rejected` في سجل النشاط | مراجعة قواعد المزايدة (النطاق، التوقيت) وتجربة المستخدم (وضوح الرسائل، التحقق من الجانب الأمامي). |
| متوسط latency مرتفع في أوقات الذروة فقط | اعتبار تمديد وقت نهاية المزاد أو تحسين استجابة واجهة وضع المزايدة (تحميل، Queue). |
| رغبة في تقليل حجم السجلات | استخدام سياسة الاحتفاظ (`keep_days`) وأمر `auction-log:prune` (ومجدول التنظيف) كما في [SCENARIOS_AND_LOGGING_POLICY.md](SCENARIOS_AND_LOGGING_POLICY.md). |

---

## 4. خلاصة

- **اللوحة التحليلية** تجمع السيناريوهات واختبارات المنطق وسجل النشاط في مكان واحد.
- **نسبة النجاح ومتوسط زمن الاستجابة ومتوسط المزايدات/دقيقة** مؤشرات تشغيلية وجودة.
- **سجل النشاط** أداة تدقيق ومراجعة عند الشكاوى أو التحقق من سلوك المزاد.
- **تفسير النتائج** يفضي إلى قرارات عملية: ضبط المنطق، تحسين الأداء، تحسين تجربة المستخدم، أو سياسات الاحتفاظ بالسجلات.

---

*آخر تحديث: إضافة توثيق تفسير النتائج للأعمال.*
